<div *ngIf="loading" class="loading-spinner">Loading...</div>

<div *ngIf="!loading">
  <!-- Teams Table -->
  <mat-card>
    <mat-card-title>Teams</mat-card-title>
    <table mat-table [dataSource]="teams" class="mat-elevation-z8">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Team Name</th>
        <td mat-cell *matCellDef="let team">{{ team.name }}</td>
      </ng-container>

      <ng-container matColumnDef="manager">
        <th mat-header-cell *matHeaderCellDef>Manager</th>
        <td mat-cell *matCellDef="let team">{{ team.manager?.name }}</td>
      </ng-container>

      <ng-container matColumnDef="members">
        <th mat-header-cell *matHeaderCellDef>Members</th>
        <td mat-cell *matCellDef="let team">{{ team.members.length }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['name', 'manager', 'members']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['name', 'manager', 'members'];"></tr>
    </table>
  </mat-card>

  <!-- Task Stats Chart -->
  <mat-card>
    <mat-card-title>Tasks Overview</mat-card-title>
    <canvas baseChart
            [data]="[taskStats.completed, taskStats.inProgress, taskStats.pending]"
            [labels]="['Completed','In Progress','Pending']"
            [chartType]="'doughnut'">
    </canvas>
  </mat-card>

  <!-- User Stats Chart -->
  <mat-card>
    <mat-card-title>Users & Managers</mat-card-title>
    <canvas baseChart
            [data]="[userStats.usersCount, userStats.managersCount]"
            [labels]="['Users','Managers']"
            [chartType]="'pie'">
    </canvas>
  </mat-card>

  <!-- Managers List -->
  <mat-card>
    <mat-card-title>Managers</mat-card-title>
    <ul>
      <li *ngFor="let manager of managers">{{ manager.name }} ({{ manager.email }})</li>
    </ul>
  </mat-card>
</div>
