<!-- notification-bell -->
<div class="notification-bell">
  <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Notifications">
    <mat-icon matBadge="{{ unread }}" matBadgeColor="warn" matBadgeHidden="{{ unread === 0 }}">notifications</mat-icon>
  </button>

  <mat-menu #menu="matMenu" class="notification-menu">
    <div class="menu-header">
      <span>Notifications</span>
      <button mat-button (click)="markAll()">Mark all read</button>
    </div>

    <mat-divider></mat-divider>

    <div class="menu-body" *ngIf="notifications && notifications.length; else noNotifs">
      <button mat-menu-item *ngFor="let n of notifications" (click)="openNotification(n)" [class.unread]="!n.read">
        <div class="notif-content">
          <div class="notif-message">{{ n.message }}</div>
          <div class="notif-meta">{{ n.createdAt | date:'short' }}</div>
        </div>
      </button>
    </div>

    <ng-template #noNotifs>
      <div class="empty">No notifications</div>
    </ng-template>
  </mat-menu>
</div>
